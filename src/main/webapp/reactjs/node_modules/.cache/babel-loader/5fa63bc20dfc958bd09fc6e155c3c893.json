{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Valentin\\\\new_js\\\\spring-boot-security-postgresql-master\\\\src\\\\main\\\\webapp\\\\reactjs\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\Valentin\\\\new_js\\\\spring-boot-security-postgresql-master\\\\src\\\\main\\\\webapp\\\\reactjs\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Valentin\\\\new_js\\\\spring-boot-security-postgresql-master\\\\src\\\\main\\\\webapp\\\\reactjs\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"C:\\\\Users\\\\Valentin\\\\new_js\\\\spring-boot-security-postgresql-master\\\\src\\\\main\\\\webapp\\\\reactjs\\\\src\\\\components\\\\register.js\";\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nfunction registerUser(_x) {\n  return _registerUser.apply(this, arguments);\n}\n\nfunction _registerUser() {\n  _registerUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(credentials) {\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            return _context2.abrupt(\"return\", fetch('http://localhost:8083/api/auth/signup', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(credentials)\n            }).then(function (data) {\n              return data;\n            }));\n\n          case 1:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _registerUser.apply(this, arguments);\n}\n\nexport default function Register() {\n  var navigate = useNavigate();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      username = _useState2[0],\n      setUserName = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      email = _useState4[0],\n      setEmail = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      password = _useState6[0],\n      setPassword = _useState6[1];\n\n  var _useState7 = useState(\"user\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      roles = _useState8[0],\n      setRoles = _useState8[1];\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var answer, json_answer, div, tag, text, _tag, _text;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.next = 3;\n              return registerUser({\n                username: username,\n                email: email,\n                password: password,\n                roles: roles.split(\",\").map(function (i) {\n                  return i.trim();\n                })\n              });\n\n            case 3:\n              answer = _context.sent;\n              console.log(answer);\n              _context.next = 7;\n              return answer.json();\n\n            case 7:\n              json_answer = _context.sent;\n              console.log(json_answer);\n\n              if (answer.status === 200) {\n                navigate(\"/login\");\n              } else if (document.querySelector(\"#warning\") === null) {\n                div = document.querySelector(\"#main\");\n                tag = document.createElement(\"p\");\n                tag.id = \"warning\";\n                tag.style.color = \"red\";\n                text = document.createTextNode(json_answer.message);\n                tag.appendChild(text);\n                div.appendChild(tag);\n              } else if (document.querySelector(\"#warning\") !== null) {\n                _tag = document.querySelector(\"#warning\");\n\n                _tag.removeChild(_tag.firstChild);\n\n                _text = document.createTextNode(json_answer.message);\n\n                _tag.appendChild(_text);\n              }\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmit(_x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"main\",\n    className: \"login-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, \"Please Register\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 21\n    }\n  }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    onChange: function onChange(e) {\n      return setUserName(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 21\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 21\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 21\n    }\n  }, \"Roles (several using ',') (for 'admin')\"), /*#__PURE__*/React.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return setRoles(e.target.value);\n    },\n    value: roles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  }, \"Submit\"))));\n}","map":{"version":3,"sources":["C:/Users/Valentin/new_js/spring-boot-security-postgresql-master/src/main/webapp/reactjs/src/components/register.js"],"names":["React","useState","useNavigate","registerUser","credentials","fetch","method","headers","body","JSON","stringify","then","data","Register","navigate","username","setUserName","email","setEmail","password","setPassword","roles","setRoles","handleSubmit","e","preventDefault","split","map","i","trim","answer","console","log","json","json_answer","status","document","querySelector","div","tag","createElement","id","style","color","text","createTextNode","message","appendChild","removeChild","firstChild","target","value"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\r\nimport {useNavigate} from \"react-router-dom\";\r\n\r\nasync function registerUser(credentials) {\r\n    return fetch('http://localhost:8083/api/auth/signup', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(credentials)\r\n    })\r\n        .then(data => data)\r\n}\r\n\r\nexport default function Register() {\r\n    let navigate = useNavigate();\r\n    const [username, setUserName] = useState();\r\n    const [email, setEmail] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [roles, setRoles] = useState(\"user\");\r\n\r\n    const handleSubmit = async e => {\r\n        e.preventDefault();\r\n        const answer = await registerUser({\r\n            username: username,\r\n            email: email,\r\n            password: password,\r\n            roles: roles.split(\",\").map(i => i.trim())\r\n        });\r\n        console.log(answer);\r\n        const json_answer = await answer.json();\r\n        console.log(json_answer);\r\n        if (answer.status === 200) {\r\n            navigate(\"/login\");\r\n        } else if (document.querySelector(\"#warning\") === null) {\r\n            let div = document.querySelector(\"#main\")\r\n            let tag = document.createElement(\"p\");\r\n            tag.id = \"warning\";\r\n            tag.style.color = \"red\";\r\n            let text = document.createTextNode(json_answer.message);\r\n            tag.appendChild(text);\r\n            div.appendChild(tag);\r\n        } else if (document.querySelector(\"#warning\") !== null) {\r\n            let tag = document.querySelector(\"#warning\");\r\n            tag.removeChild(tag.firstChild);\r\n            let text = document.createTextNode(json_answer.message);\r\n            tag.appendChild(text);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div id={\"main\"} className=\"login-wrapper\">\r\n            <h1>Please Register</h1>\r\n            <form onSubmit={handleSubmit}>\r\n                <label>\r\n                    <p>Username</p>\r\n                    <input type=\"text\" onChange={e => setUserName(e.target.value)}/>\r\n                </label>\r\n                <label>\r\n                    <p>Email</p>\r\n                    <input type=\"text\" onChange={e => setEmail(e.target.value)}/>\r\n                </label>\r\n                <label>\r\n                    <p>Password</p>\r\n                    <input type=\"password\" onChange={e => setPassword(e.target.value)}/>\r\n                </label>\r\n                <label>\r\n                    <p>Roles (several using ',') (for 'admin')</p>\r\n                    <input onChange={e => setRoles(e.target.value)} value={roles}/>\r\n                </label>\r\n                <div>\r\n                    <button type=\"submit\">Submit</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}